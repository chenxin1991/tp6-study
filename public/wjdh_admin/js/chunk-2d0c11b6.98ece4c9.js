(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11b6"],{4543:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:6,sm:24}},[n("a-form-item",{attrs:{label:"名称"}},[n("a-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),n("a-col",{attrs:{md:6,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons"},[n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建")])],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]],2)}}])}),n("leader-form",{ref:"LeaderForm",on:{ok:e.handleOk}})],1)},r=[],o=(n("b0c0"),n("2af9")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.config.title,width:640,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{ref:"name",attrs:{label:"姓名",prop:"name"}},[n("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("a-form-model-item",{ref:"phone",attrs:{label:"手机号",prop:"phone"}},[n("a-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1)],1)},s=[],c=n("b775"),l={Leader:"/Leader"};function u(e){return Object(c["b"])({url:l.Leader,method:"post",data:e})}function d(e){return Object(c["b"])({url:l.Leader+"/"+e.id,method:"put",data:e})}function f(e){return Object(c["b"])({url:l.Leader+"/"+e.id,method:"delete",data:e})}function m(e){return Object(c["b"])({url:l.Leader,method:"get",params:e})}var h={data:function(){var e=function(e,t,n){t?/^1[3456789]\d{9}$/.test(t)?n():n(new Error("手机号格式不正确!")):n(new Error("请输入手机号!"))};return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,config:{},form:{name:"",phone:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}]}}},created:function(){},methods:{add:function(){var e=this;this.config.action="add",this.config.title="新增队长",this.visible=!0,this.$nextTick((function(){e.form.resetFields()}))},edit:function(e){this.config.action="edit",this.config.title="编辑队长",this.config.id=e.id,this.visible=!0,this.form=JSON.parse(JSON.stringify(e))},handleSubmit:function(){var e=this,t={name:this.form.name,phone:this.form.phone};this.$refs.ruleForm.validate((function(n){if(!n)return e.confirmLoading=!1,!1;"add"===e.config.action?u(t).then((function(n){e.$message.success("添加成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t)})).catch((function(t){e.$message.error("".concat(t.message))})):"edit"===e.config.action&&(t.id=e.config.id,d(t).then((function(n){e.$message.success("修改成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t)})).catch((function(t){e.$message.error("".concat(t.message))})))}))},handleCancel:function(){this.visible=!1}}},p=h,b=n("2877"),g=Object(b["a"])(p,i,s,!1,null,null,null),v=g.exports,k={name:"BasicLeader",components:{STable:o["o"],LeaderForm:v},data:function(){var e=this;return{queryParam:{},columns:[{title:"名称",dataIndex:"name"},{title:"手机号",dataIndex:"phone"},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],roles:[],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.result}))}}},methods:{handleAdd:function(){this.$refs.LeaderForm.add()},handleEdit:function(e){this.$refs.LeaderForm.edit(e)},handleOk:function(){this.$refs.table.refresh()},handleDelete:function(e){var t=this;this.$confirm({title:"警告",content:"真的要删除 ".concat(e.name," 吗?"),okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){f(e).then((function(e){t.$message.success("删除成功"),t.$refs.table.refresh()})).catch((function(e){t.$message.error("load user err: ".concat(e.message))}))}})}}},$=k,y=Object(b["a"])($,a,r,!1,null,null,null);t["default"]=y.exports}}]);